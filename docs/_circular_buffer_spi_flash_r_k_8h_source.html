<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CircularBufferSpiFlashRK: src/CircularBufferSpiFlashRK.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CircularBufferSpiFlashRK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">CircularBufferSpiFlashRK.h</div></div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#ifndef __CIRCULARBUFFERSPIFLASHRK_H</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#define __CIRCULARBUFFERSPIFLASHRK_H</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &quot;Particle.h&quot;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#ifndef UNITTEST</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &quot;SpiFlashRK.h&quot;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;SpiFlashTester.h&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;deque&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span> </div>
<div class="foldopen" id="foldopen00015" data-start="{" data-end="};">
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html">   15</a></span><span class="keyword">class </span><a class="code hl_class" href="class_circular_buffer_spi_flash_r_k.html">CircularBufferSpiFlashRK</a> {</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00023" data-start="{" data-end="};">
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">   23</a></span>    <span class="keyword">class </span><a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">DataBuffer</a> {</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>        <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#ad356a26846fb7d91906ddcc05a74f2a7">DataBuffer</a>();</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>        <span class="keyword">virtual</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#abbad4728a3b8f6fc97f2ab038790099e">~DataBuffer</a>();</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>        <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#ad356a26846fb7d91906ddcc05a74f2a7">DataBuffer</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a666dd9b01a0e42774b85be8509ed600c">buf</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a3acd81b28e45c730016deae6ef2d5b5b">len</a>);</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>        <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#ad356a26846fb7d91906ddcc05a74f2a7">DataBuffer</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">DataBuffer</a> &amp;other);</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">DataBuffer</a> &amp;<a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a45809b396a06096a17c9400381e1001c">operator=</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">DataBuffer</a> &amp;other);</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>        <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#ad356a26846fb7d91906ddcc05a74f2a7">DataBuffer</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str);</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a4d0c9b12f90cac8de0a39a4b5c03cc0d">   81</a></span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a4d0c9b12f90cac8de0a39a4b5c03cc0d">size</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a666dd9b01a0e42774b85be8509ed600c">buf</a> ? <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a3acd81b28e45c730016deae6ef2d5b5b">len</a> : 0; };</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a1bea8c5a150abf60f63da0e0a066b74b">free</a>();</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>        </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a72e73f24ab6c18526f2bb2762ba92ee2">copy</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a666dd9b01a0e42774b85be8509ed600c">buf</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a3acd81b28e45c730016deae6ef2d5b5b">len</a>);</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a72e73f24ab6c18526f2bb2762ba92ee2">copy</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str);</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        uint8_t *<a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a908184f831aa128601733dca2bc55b82">allocate</a>(<span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a3acd81b28e45c730016deae6ef2d5b5b">len</a>);</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a3bd8411b56c15e00e6fbafbfb4bf3c01">operator==</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">DataBuffer</a> &amp;other) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>        <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#acbb7993a6e1e880c72ae82189f8d7dee">equals</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *str) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a18493df360febe932a3d5c24d0e85861">c_str</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#adaf3ec9e0ec2dcf2741b217e0f68df79">  169</a></span>        <span class="keyword">operator</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *() <span class="keyword">const</span> { <span class="keywordflow">return</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a18493df360febe932a3d5c24d0e85861">c_str</a>(); };</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        uint8_t <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a668bb04738b6fca52ca64bb21eb25678">getByIndex</a>(<span class="keywordtype">size_t</span> index) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a9f8ff64191aededf56be13ba7aaaac44">  184</a></span>        <span class="keyword">const</span> uint8_t *<a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a9f8ff64191aededf56be13ba7aaaac44">getBuffer</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a666dd9b01a0e42774b85be8509ed600c">buf</a>; };</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#abc828399b293cf19a7091926333fbe12">  191</a></span>        <span class="keywordtype">size_t</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#abc828399b293cf19a7091926333fbe12">getLen</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a3acd81b28e45c730016deae6ef2d5b5b">len</a>; };</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a300226a4369dde7e77ddd0e3e32de4d0">truncate</a>(<span class="keywordtype">size_t</span> newLen);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="keyword">protected</span>:</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a666dd9b01a0e42774b85be8509ed600c">  212</a></span>        uint8_t *<a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a666dd9b01a0e42774b85be8509ed600c">buf</a>; </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a3acd81b28e45c730016deae6ef2d5b5b">  221</a></span>        <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a3acd81b28e45c730016deae6ef2d5b5b">len</a>;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    };</div>
</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="foldopen" id="foldopen00232" data-start="{" data-end="};">
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html">  232</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html">RecordCommon</a> { <span class="comment">// 2 bytes</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html#a5939069d28e86afbab0bfe08275f594d">  233</a></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html#a5939069d28e86afbab0bfe08275f594d">size</a> : 12; </div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html#a377f92bae6b4ee097c9ea69d7f67fff1">  234</a></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html#a377f92bae6b4ee097c9ea69d7f67fff1">flags</a> : 4; </div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    } __attribute__((__packed__));</div>
</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span> </div>
<div class="foldopen" id="foldopen00243" data-start="{" data-end="};">
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html">  243</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html">SectorCommon</a> { <span class="comment">// 8 bytes</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#a35fb3ff156326fdbb955c942dbf2c096">  244</a></span>        uint32_t <a class="code hl_variable" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#a35fb3ff156326fdbb955c942dbf2c096">sequence</a>; </div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#aebb16fb5ef69b700df8294e428ef0b8d">  245</a></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#aebb16fb5ef69b700df8294e428ef0b8d">flags</a>:4; </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#a1e4bf0be2ea09ab7992563e72a5e7cf6">  246</a></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#a1e4bf0be2ea09ab7992563e72a5e7cf6">reserved</a>:7; </div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#af32ee7d735fff9e1531aa11612825f32">  247</a></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#af32ee7d735fff9e1531aa11612825f32">recordCount</a>:9; </div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#a2f54cc367f63c395fb4e0ce2178482be">  248</a></span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#a2f54cc367f63c395fb4e0ce2178482be">dataSize</a>:12; </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    } __attribute__((__packed__));</div>
</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span> </div>
<div class="foldopen" id="foldopen00258" data-start="{" data-end="};">
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_header.html">  258</a></span>    <span class="keyword">struct </span><a class="code hl_struct" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_header.html">SectorHeader</a> { <span class="comment">// 12 bytes</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_header.html#adf38302a4c99afdffdd9d046059d8edc">  259</a></span>        uint32_t <a class="code hl_variable" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_header.html#adf38302a4c99afdffdd9d046059d8edc">sectorMagic</a>; </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno"><a class="line" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_header.html#aaaf6a1958bafafacdf9cb317941a4b74">  260</a></span>        <a class="code hl_struct" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html">SectorCommon</a> <a class="code hl_variable" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_header.html#aaaf6a1958bafafacdf9cb317941a4b74">c</a>; </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    } __attribute__((__packed__));</div>
</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span> </div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="foldopen" id="foldopen00279" data-start="{" data-end="};">
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html">  279</a></span>    <span class="keyword">class </span><a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html">Sector</a> {</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#aabcc94dcad042d2aac68aaf9a82640b8">clear</a>(uint16_t <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#adbd94290d637f27f9d9baaf79f0ce96b">sectorNum</a> = 0);</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span> </div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        uint16_t <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#a7d487e3f6b78e685131fc6e4ec896d33">getLastOffset</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#a5d2af200397f87c9ecb85cabc44121a5">log</a>(LogLevel level, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg, <span class="keywordtype">bool</span> includeData = <span class="keyword">false</span>) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span> </div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#adbd94290d637f27f9d9baaf79f0ce96b">  304</a></span>        uint16_t <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#adbd94290d637f27f9d9baaf79f0ce96b">sectorNum</a> = 0; </div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#ae1cf4535a4c38b98dee9370f2ae44b66">  305</a></span>        std::vector&lt;RecordCommon&gt; <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#ae1cf4535a4c38b98dee9370f2ae44b66">records</a>; </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#a5d7999fc1e2d1f28f1e3982faeb669e9">  306</a></span>        <a class="code hl_struct" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html">SectorCommon</a> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#a5d7999fc1e2d1f28f1e3982faeb669e9">c</a>; </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    };</div>
</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#af8247a646cef67d55a0b61b5dd6533ae">CircularBufferSpiFlashRK</a>(SpiFlash *<a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a578b17b5feeb99c1ba0378e8726089b0">spiFlash</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a09e0d4304539dc46c9ae8cc111a32388">addrStart</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#abf699ab2202f8c1b93f3a806e6f6bd2a">addrEnd</a>);</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="keyword">virtual</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#aacdb38297a29247c2d93421cfdac69f0">~CircularBufferSpiFlashRK</a>();</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a8adb742373527d0dc3c1255357a863e5">load</a>();</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span> </div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a60c23ebb59d7200219b31594ebcf7bbc">format</a>();</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span> </div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a235738da1046644f12df4b002ea9e10b">fsck</a>(<span class="keywordtype">bool</span> repair);</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span> </div>
<div class="foldopen" id="foldopen00358" data-start="{" data-end="};">
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html">  358</a></span>    <span class="keyword">class </span><a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html">ReadInfo</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">DataBuffer</a> {</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    <span class="keyword">public</span>:        </div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a6f5af81d090ca4acdc668d928a144ab1">log</a>(LogLevel level, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a8d34af5375662c4ed944a6a45bb1b8a0">  367</a></span>        uint16_t <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a8d34af5375662c4ed944a6a45bb1b8a0">sectorNum</a>; </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a72725064216f2ca7aeb574eba676b9ce">  368</a></span>        <a class="code hl_struct" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html">SectorCommon</a> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a72725064216f2ca7aeb574eba676b9ce">sectorCommon</a>; </div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#aef1c347ee4018910ad653497600cef88">  369</a></span>        <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#aef1c347ee4018910ad653497600cef88">index</a>; </div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a67370e03328340ecaadb2523c5a92fc6">  370</a></span>        <a class="code hl_struct" href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html">RecordCommon</a> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a67370e03328340ecaadb2523c5a92fc6">recordCommon</a>; </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    };</div>
</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span> </div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a5ab15276d9b4c507fea822cdada1e509">readData</a>(<a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html">ReadInfo</a> &amp;readInfo);</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a170c22ff2b87535bde6fe70ace81734c">markAsRead</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html">ReadInfo</a> &amp;readInfo);</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a2b7c67e2849a53a5668f91b1f1770816">writeData</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">DataBuffer</a> &amp;data);</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span> </div>
<div class="foldopen" id="foldopen00414" data-start="{" data-end="};">
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html">  414</a></span>    <span class="keyword">class </span><a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html">UsageStats</a> {</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#afa453adb1ffa0016791fd8cca762b157">log</a>(LogLevel level, <span class="keyword">const</span> <span class="keywordtype">char</span> *msg) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span> </div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#a6dee8a23647a526e5087b7343e02d8ac">  424</a></span>        <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#a6dee8a23647a526e5087b7343e02d8ac">recordCount</a>; </div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#a91441e74e250db923b69b73dc9c4ab76">  425</a></span>        <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#a91441e74e250db923b69b73dc9c4ab76">dataSize</a>; </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#aece6764b26a46189661758ac38276603">  426</a></span>        <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#aece6764b26a46189661758ac38276603">freeSectors</a>; </div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    };</div>
</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a61bc4080818916c9912b94740a2c69ce">getUsageStats</a>(<a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html">UsageStats</a> &amp;usageStats);</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span> </div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span><span class="preprocessor">#ifndef UNITTEST</span></div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span><span class="keyword">protected</span>:</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html">Sector</a> *<a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a481d4144f760d2bd516c181e4d285251">getSectorFromCache</a>(uint16_t sectorNum);</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span> </div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html">Sector</a> *<a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a568538abd568f66774eb61a043e7d7d0">getSector</a>(uint16_t sectorNum);</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span> </div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a478099fd1c72c70e454e5d1f7e42e049">readSector</a>(uint16_t sectorNum, <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html">Sector</a> *sector);</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span> </div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#aa6acce5c09acca8c9aa0e292f46059e0">writeSectorHeader</a>(uint16_t sectorNum, <span class="keywordtype">bool</span> erase, uint32_t sequence);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#aa3a5dd4d8b3788e4303b352526654199">appendDataToSector</a>(<a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html">Sector</a> *sector, <span class="keyword">const</span> <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">DataBuffer</a> &amp;data, uint16_t flags);</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    </div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a3817217adba2e490573ecb55f5c66875">finalizeSector</a>(<a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html">Sector</a> *sector);</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span> </div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a86006434a834c159e32a23d15a1ee39b">readDataFromSector</a>(<a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html">Sector</a> *sector, <span class="keywordtype">size_t</span> index, <a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">DataBuffer</a> &amp;data, <a class="code hl_struct" href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html">RecordCommon</a> &amp;meta);</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a19fcf83ed6b62ce020d765e55ab4b8fe">validateSector</a>(<a class="code hl_class" href="class_circular_buffer_spi_flash_r_k_1_1_sector.html">Sector</a> *pSector);</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span> </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a37099570a9af48568d710c66977a3312">sequenceToSectorNum</a>(uint32_t sequence, uint16_t &amp;sectorNum) <span class="keyword">const</span>;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span> </div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span> </div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a4a40e8e4d190ef859d04377c5bc5e83a">  549</a></span>    uint32_t <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a4a40e8e4d190ef859d04377c5bc5e83a">sectorNumToAddr</a>(uint16_t sectorNum)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a09e0d4304539dc46c9ae8cc111a32388">addrStart</a> + sectorNum * <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a578b17b5feeb99c1ba0378e8726089b0">spiFlash</a>-&gt;getSectorSize(); };</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span> </div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#aed362f2b86c41054437890134242d339">clearCache</a>();</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span> </div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#ad17c2ee2a4b2cbf4d2bfa9ab024bddaa">  556</a></span>    <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#ad17c2ee2a4b2cbf4d2bfa9ab024bddaa">SECTOR_MAGIC</a> = 0x0ceb6443; </div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a70d27b412e85cc35b367fe2cade1b299">  557</a></span>    <span class="keyword">static</span> <span class="keyword">const</span> uint32_t <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a70d27b412e85cc35b367fe2cade1b299">SECTOR_MAGIC_ERASED</a> = 0xffffffff; </div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#aa6572d4ee56457e6afd87f76bd25a832">  558</a></span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#aa6572d4ee56457e6afd87f76bd25a832">SECTOR_FLAG_STARTED_MASK</a> = 0x01; </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a6ac4189de4e4b04d63815188a139cc5e">  559</a></span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a6ac4189de4e4b04d63815188a139cc5e">SECTOR_FLAG_FINALIZED_MASK</a> = 0x02; </div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a5912ad454fc0c21838f6ff3cfc7b11eb">  560</a></span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a5912ad454fc0c21838f6ff3cfc7b11eb">SECTOR_FLAG_CORRUPTED_MASK</a> = 0x04; </div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span> </div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a16e43d7fa6438a628d3fdba6c31bc503">  562</a></span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a16e43d7fa6438a628d3fdba6c31bc503">RECORD_SIZE_ERASED</a> = 0xfff; </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a82930c5b6f874f67ce420c988e9f52be">  563</a></span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a82930c5b6f874f67ce420c988e9f52be">RECORD_FLAG_READ_MASK</a> = 0x1; </div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span> </div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#ac6f99a80a69cdb6e1fb59891fe962dd7">  576</a></span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#ac6f99a80a69cdb6e1fb59891fe962dd7">SECTOR_CACHE_SIZE</a> = 8;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span> </div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span><span class="preprocessor">#ifndef UNITTEST</span></div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a58b4dbe91cbf34d52edf4bd764bbe60e">  587</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a58b4dbe91cbf34d52edf4bd764bbe60e">lock</a>() { os_mutex_recursive_lock(<a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a8904f39e18d5a6782ddae2beb4173607">mutex</a>); };</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span> </div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a89b3df3d2620ff85ea450da20f011f31">  594</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a89b3df3d2620ff85ea450da20f011f31">tryLock</a>() { <span class="keywordflow">return</span> os_mutex_recursive_trylock(<a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a8904f39e18d5a6782ddae2beb4173607">mutex</a>); };</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span> </div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a1c80016a21140072a0cab6eca6506bd3">  599</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a1c80016a21140072a0cab6eca6506bd3">unlock</a>() { os_mutex_recursive_unlock(<a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a8904f39e18d5a6782ddae2beb4173607">mutex</a>); };</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a58b4dbe91cbf34d52edf4bd764bbe60e">lock</a>() {};</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a89b3df3d2620ff85ea450da20f011f31">tryLock</a>() { <span class="keywordflow">return</span> <span class="keyword">true</span>; };</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_circular_buffer_spi_flash_r_k.html#a1c80016a21140072a0cab6eca6506bd3">unlock</a>() {};</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span><span class="preprocessor">#endif </span><span class="comment">// UNITTEST</span></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span> </div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span><span class="keyword">protected</span>:</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a578b17b5feeb99c1ba0378e8726089b0">  607</a></span>    SpiFlash *<a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a578b17b5feeb99c1ba0378e8726089b0">spiFlash</a>; </div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a09e0d4304539dc46c9ae8cc111a32388">  608</a></span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a09e0d4304539dc46c9ae8cc111a32388">addrStart</a>; </div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#abf699ab2202f8c1b93f3a806e6f6bd2a">  609</a></span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#abf699ab2202f8c1b93f3a806e6f6bd2a">addrEnd</a>; </div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a53ac0a6ad9a306eebd662ca45bc5c952">  610</a></span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a53ac0a6ad9a306eebd662ca45bc5c952">sectorCount</a>; </div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span> </div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a6dfb6fc1c16ecb3747ec582c63eff9d3">  612</a></span>    <a class="code hl_struct" href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html">SectorCommon</a> *<a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a6dfb6fc1c16ecb3747ec582c63eff9d3">sectorMeta</a> = <span class="keyword">nullptr</span>; </div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span> </div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span> </div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a71129a8c1f99f04194c48cac564a02f2">  615</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a71129a8c1f99f04194c48cac564a02f2">isValid</a> = <span class="keyword">false</span>; </div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a062364dffc6f299317bbb093519050ed">  616</a></span>    std::deque&lt;Sector*&gt; <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a062364dffc6f299317bbb093519050ed">sectorCache</a>; </div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span> </div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#af80549fd6874d1b54b702625a6238de1">  618</a></span>    uint32_t <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#af80549fd6874d1b54b702625a6238de1">firstSequence</a> = 0; </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a986083e8e9d153e217bb3cf882bd50d6">  619</a></span>    uint32_t <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a986083e8e9d153e217bb3cf882bd50d6">writeSequence</a> = 0; </div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#ab0cb6344b834a5f9fbf3fa2b7ba1600c">  620</a></span>    uint32_t <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#ab0cb6344b834a5f9fbf3fa2b7ba1600c">lastSequence</a> = 0; </div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span><span class="preprocessor">#ifndef UNITTEST</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno"><a class="line" href="class_circular_buffer_spi_flash_r_k.html#a8904f39e18d5a6782ddae2beb4173607">  628</a></span>    os_mutex_recursive_t <a class="code hl_variable" href="class_circular_buffer_spi_flash_r_k.html#a8904f39e18d5a6782ddae2beb4173607">mutex</a> = 0; </div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span> </div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>};</div>
</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span> </div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span> </div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span><span class="preprocessor">#endif </span><span class="comment">// __CIRCULARBUFFERSPIFLASHRK_H</span></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html">CircularBufferSpiFlashRK::DataBuffer</a></div><div class="ttdoc">Class to hold a copy of data, either by pointer and length or a c-string.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:23</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a18493df360febe932a3d5c24d0e85861"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a18493df360febe932a3d5c24d0e85861">CircularBufferSpiFlashRK::DataBuffer::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">Returns a pointer to the internal string.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:929</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a1bea8c5a150abf60f63da0e0a066b74b"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a1bea8c5a150abf60f63da0e0a066b74b">CircularBufferSpiFlashRK::DataBuffer::free</a></div><div class="ttdeci">void free()</div><div class="ttdoc">Frees the allocate buffer and sets the length to 0.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:870</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a300226a4369dde7e77ddd0e3e32de4d0"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a300226a4369dde7e77ddd0e3e32de4d0">CircularBufferSpiFlashRK::DataBuffer::truncate</a></div><div class="ttdeci">void truncate(size_t newLen)</div><div class="ttdoc">Set the length to newLen if it's &lt;= the current length (only truncates, does not extend)</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:904</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a3acd81b28e45c730016deae6ef2d5b5b"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a3acd81b28e45c730016deae6ef2d5b5b">CircularBufferSpiFlashRK::DataBuffer::len</a></div><div class="ttdeci">size_t len</div><div class="ttdoc">Length of the data in buf.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:221</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a3bd8411b56c15e00e6fbafbfb4bf3c01"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a3bd8411b56c15e00e6fbafbfb4bf3c01">CircularBufferSpiFlashRK::DataBuffer::operator==</a></div><div class="ttdeci">bool operator==(const DataBuffer &amp;other) const</div><div class="ttdoc">Returns true if size and bytes are the same as another object.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:911</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a45809b396a06096a17c9400381e1001c"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a45809b396a06096a17c9400381e1001c">CircularBufferSpiFlashRK::DataBuffer::operator=</a></div><div class="ttdeci">DataBuffer &amp; operator=(const DataBuffer &amp;other)</div><div class="ttdoc">Set this object with a copy of another.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:864</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a4d0c9b12f90cac8de0a39a4b5c03cc0d"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a4d0c9b12f90cac8de0a39a4b5c03cc0d">CircularBufferSpiFlashRK::DataBuffer::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdoc">Returns the size of the allocated buffer.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:81</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a666dd9b01a0e42774b85be8509ed600c"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a666dd9b01a0e42774b85be8509ed600c">CircularBufferSpiFlashRK::DataBuffer::buf</a></div><div class="ttdeci">uint8_t * buf</div><div class="ttdoc">Internal allocated buffer.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:212</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a668bb04738b6fca52ca64bb21eb25678"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a668bb04738b6fca52ca64bb21eb25678">CircularBufferSpiFlashRK::DataBuffer::getByIndex</a></div><div class="ttdeci">uint8_t getByIndex(size_t index) const</div><div class="ttdoc">Get a byte by index from the internal buffer.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:940</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a72e73f24ab6c18526f2bb2762ba92ee2"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a72e73f24ab6c18526f2bb2762ba92ee2">CircularBufferSpiFlashRK::DataBuffer::copy</a></div><div class="ttdeci">void copy(const void *buf, size_t len)</div><div class="ttdoc">Copies the data in buf and len into an allocated buffer in this object.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:878</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a908184f831aa128601733dca2bc55b82"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a908184f831aa128601733dca2bc55b82">CircularBufferSpiFlashRK::DataBuffer::allocate</a></div><div class="ttdeci">uint8_t * allocate(size_t len)</div><div class="ttdoc">Allocate a buffer of the specified length but do not write the data.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:899</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_a9f8ff64191aededf56be13ba7aaaac44"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#a9f8ff64191aededf56be13ba7aaaac44">CircularBufferSpiFlashRK::DataBuffer::getBuffer</a></div><div class="ttdeci">const uint8_t * getBuffer() const</div><div class="ttdoc">Returns a pointer to the internal buffer.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:184</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_abbad4728a3b8f6fc97f2ab038790099e"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#abbad4728a3b8f6fc97f2ab038790099e">CircularBufferSpiFlashRK::DataBuffer::~DataBuffer</a></div><div class="ttdeci">virtual ~DataBuffer()</div><div class="ttdoc">Destroy object. Frees the allocated buffer.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:845</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_abc828399b293cf19a7091926333fbe12"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#abc828399b293cf19a7091926333fbe12">CircularBufferSpiFlashRK::DataBuffer::getLen</a></div><div class="ttdeci">size_t getLen() const</div><div class="ttdoc">Get the length of the data.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:191</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_acbb7993a6e1e880c72ae82189f8d7dee"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#acbb7993a6e1e880c72ae82189f8d7dee">CircularBufferSpiFlashRK::DataBuffer::equals</a></div><div class="ttdeci">bool equals(const char *str) const</div><div class="ttdoc">Returns true of the strings are equal.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:920</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_data_buffer_html_ad356a26846fb7d91906ddcc05a74f2a7"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_data_buffer.html#ad356a26846fb7d91906ddcc05a74f2a7">CircularBufferSpiFlashRK::DataBuffer::DataBuffer</a></div><div class="ttdeci">DataBuffer()</div><div class="ttdoc">Construct an empty buffer.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:841</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_read_info_html"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html">CircularBufferSpiFlashRK::ReadInfo</a></div><div class="ttdoc">Structure used by readData and markAsRead.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:358</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_read_info_html_a67370e03328340ecaadb2523c5a92fc6"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a67370e03328340ecaadb2523c5a92fc6">CircularBufferSpiFlashRK::ReadInfo::recordCommon</a></div><div class="ttdeci">RecordCommon recordCommon</div><div class="ttdoc">Information about the record that was read.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:370</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_read_info_html_a6f5af81d090ca4acdc668d928a144ab1"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a6f5af81d090ca4acdc668d928a144ab1">CircularBufferSpiFlashRK::ReadInfo::log</a></div><div class="ttdeci">void log(LogLevel level, const char *msg) const</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:653</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_read_info_html_a72725064216f2ca7aeb574eba676b9ce"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a72725064216f2ca7aeb574eba676b9ce">CircularBufferSpiFlashRK::ReadInfo::sectorCommon</a></div><div class="ttdeci">SectorCommon sectorCommon</div><div class="ttdoc">Information about the sector. The sequence is what's used from this currently.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:368</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_read_info_html_a8d34af5375662c4ed944a6a45bb1b8a0"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#a8d34af5375662c4ed944a6a45bb1b8a0">CircularBufferSpiFlashRK::ReadInfo::sectorNum</a></div><div class="ttdeci">uint16_t sectorNum</div><div class="ttdoc">sector number that was read from</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:367</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_read_info_html_aef1c347ee4018910ad653497600cef88"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_read_info.html#aef1c347ee4018910ad653497600cef88">CircularBufferSpiFlashRK::ReadInfo::index</a></div><div class="ttdeci">size_t index</div><div class="ttdoc">The record index that was read.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:369</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_sector_html"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_sector.html">CircularBufferSpiFlashRK::Sector</a></div><div class="ttdoc">Information about a sector, stored in RAM.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:279</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_sector_html_a5d2af200397f87c9ecb85cabc44121a5"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#a5d2af200397f87c9ecb85cabc44121a5">CircularBufferSpiFlashRK::Sector::log</a></div><div class="ttdeci">void log(LogLevel level, const char *msg, bool includeData=false) const</div><div class="ttdoc">Log information about the sector to _log.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:818</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_sector_html_a5d7999fc1e2d1f28f1e3982faeb669e9"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#a5d7999fc1e2d1f28f1e3982faeb669e9">CircularBufferSpiFlashRK::Sector::c</a></div><div class="ttdeci">SectorCommon c</div><div class="ttdoc">The SectorCommon structure for this sector.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:306</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_sector_html_a7d487e3f6b78e685131fc6e4ec896d33"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#a7d487e3f6b78e685131fc6e4ec896d33">CircularBufferSpiFlashRK::Sector::getLastOffset</a></div><div class="ttdeci">uint16_t getLastOffset() const</div><div class="ttdoc">Get the offset within the sector after the last record.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:808</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_sector_html_aabcc94dcad042d2aac68aaf9a82640b8"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#aabcc94dcad042d2aac68aaf9a82640b8">CircularBufferSpiFlashRK::Sector::clear</a></div><div class="ttdeci">void clear(uint16_t sectorNum=0)</div><div class="ttdoc">Clear the records vector and common data.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:801</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_sector_html_adbd94290d637f27f9d9baaf79f0ce96b"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#adbd94290d637f27f9d9baaf79f0ce96b">CircularBufferSpiFlashRK::Sector::sectorNum</a></div><div class="ttdeci">uint16_t sectorNum</div><div class="ttdoc">Sector number this object contains.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:304</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_sector_html_ae1cf4535a4c38b98dee9370f2ae44b66"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_sector.html#ae1cf4535a4c38b98dee9370f2ae44b66">CircularBufferSpiFlashRK::Sector::records</a></div><div class="ttdeci">std::vector&lt; RecordCommon &gt; records</div><div class="ttdoc">The RecordCommon structure for each record in this sector.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:305</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_usage_stats_html"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html">CircularBufferSpiFlashRK::UsageStats</a></div><div class="ttdoc">Class for various stats about the circular buffer usage.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:414</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_usage_stats_html_a6dee8a23647a526e5087b7343e02d8ac"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#a6dee8a23647a526e5087b7343e02d8ac">CircularBufferSpiFlashRK::UsageStats::recordCount</a></div><div class="ttdeci">size_t recordCount</div><div class="ttdoc">Number of records in the circular buffer.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:424</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_usage_stats_html_a91441e74e250db923b69b73dc9c4ab76"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#a91441e74e250db923b69b73dc9c4ab76">CircularBufferSpiFlashRK::UsageStats::dataSize</a></div><div class="ttdeci">size_t dataSize</div><div class="ttdoc">Number of bytes used for data in the circular buffer (does not include overhead)</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:425</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_usage_stats_html_aece6764b26a46189661758ac38276603"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#aece6764b26a46189661758ac38276603">CircularBufferSpiFlashRK::UsageStats::freeSectors</a></div><div class="ttdeci">size_t freeSectors</div><div class="ttdoc">Number of sectors free (includes partially filled sectors)</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:426</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_1_1_usage_stats_html_afa453adb1ffa0016791fd8cca762b157"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k_1_1_usage_stats.html#afa453adb1ffa0016791fd8cca762b157">CircularBufferSpiFlashRK::UsageStats::log</a></div><div class="ttdeci">void log(LogLevel level, const char *msg) const</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:795</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html">CircularBufferSpiFlashRK</a></div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:15</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a062364dffc6f299317bbb093519050ed"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a062364dffc6f299317bbb093519050ed">CircularBufferSpiFlashRK::sectorCache</a></div><div class="ttdeci">std::deque&lt; Sector * &gt; sectorCache</div><div class="ttdoc">Cache used by getSector()</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:616</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a09e0d4304539dc46c9ae8cc111a32388"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a09e0d4304539dc46c9ae8cc111a32388">CircularBufferSpiFlashRK::addrStart</a></div><div class="ttdeci">size_t addrStart</div><div class="ttdoc">Address in SPI flash where circular buffer begins, must be sector aligned.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:608</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a16e43d7fa6438a628d3fdba6c31bc503"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a16e43d7fa6438a628d3fdba6c31bc503">CircularBufferSpiFlashRK::RECORD_SIZE_ERASED</a></div><div class="ttdeci">static const unsigned int RECORD_SIZE_ERASED</div><div class="ttdoc">Record size value when there is no record at this location. This is the value of the 12-bit value whe...</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:562</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a170c22ff2b87535bde6fe70ace81734c"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a170c22ff2b87535bde6fe70ace81734c">CircularBufferSpiFlashRK::markAsRead</a></div><div class="ttdeci">bool markAsRead(const ReadInfo &amp;readInfo)</div><div class="ttdoc">Mark the data from readData as read.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:602</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a19fcf83ed6b62ce020d765e55ab4b8fe"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a19fcf83ed6b62ce020d765e55ab4b8fe">CircularBufferSpiFlashRK::validateSector</a></div><div class="ttdeci">bool validateSector(Sector *pSector)</div><div class="ttdoc">Used internally to validate as sector. Only used for off-device unit tests.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:415</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a1c80016a21140072a0cab6eca6506bd3"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a1c80016a21140072a0cab6eca6506bd3">CircularBufferSpiFlashRK::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdoc">Unlocks the mutex that protects shared resources.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:599</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a235738da1046644f12df4b002ea9e10b"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a235738da1046644f12df4b002ea9e10b">CircularBufferSpiFlashRK::fsck</a></div><div class="ttdeci">bool fsck(bool repair)</div><div class="ttdoc">Perform a file system check. Not currently implemented!</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:151</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a2b7c67e2849a53a5668f91b1f1770816"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a2b7c67e2849a53a5668f91b1f1770816">CircularBufferSpiFlashRK::writeData</a></div><div class="ttdeci">bool writeData(const DataBuffer &amp;data)</div><div class="ttdoc">Write data to the circular buffer.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:658</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a37099570a9af48568d710c66977a3312"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a37099570a9af48568d710c66977a3312">CircularBufferSpiFlashRK::sequenceToSectorNum</a></div><div class="ttdeci">bool sequenceToSectorNum(uint32_t sequence, uint16_t &amp;sectorNum) const</div><div class="ttdoc">Used internally to find a sector number for a sequence number.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:521</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a3817217adba2e490573ecb55f5c66875"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a3817217adba2e490573ecb55f5c66875">CircularBufferSpiFlashRK::finalizeSector</a></div><div class="ttdeci">bool finalizeSector(Sector *sector)</div><div class="ttdoc">Used internally when a sector is full and a new sector needs to be used. Use writeData() instead!</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:359</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a478099fd1c72c70e454e5d1f7e42e049"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a478099fd1c72c70e454e5d1f7e42e049">CircularBufferSpiFlashRK::readSector</a></div><div class="ttdeci">bool readSector(uint16_t sectorNum, Sector *sector)</div><div class="ttdoc">Used internally to read the data from SPI flash. Use getSector() instead!</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:215</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a481d4144f760d2bd516c181e4d285251"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a481d4144f760d2bd516c181e4d285251">CircularBufferSpiFlashRK::getSectorFromCache</a></div><div class="ttdeci">Sector * getSectorFromCache(uint16_t sectorNum)</div><div class="ttdoc">Get the Sector object for a sector if it exists in the cache.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:171</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a4a40e8e4d190ef859d04377c5bc5e83a"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a4a40e8e4d190ef859d04377c5bc5e83a">CircularBufferSpiFlashRK::sectorNumToAddr</a></div><div class="ttdeci">uint32_t sectorNumToAddr(uint16_t sectorNum) const</div><div class="ttdoc">Convert a sector number to an address.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:549</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a53ac0a6ad9a306eebd662ca45bc5c952"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a53ac0a6ad9a306eebd662ca45bc5c952">CircularBufferSpiFlashRK::sectorCount</a></div><div class="ttdeci">size_t sectorCount</div><div class="ttdoc">Calculated in constructor, number of sectors from addrStart to addrEnd.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:610</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a568538abd568f66774eb61a043e7d7d0"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a568538abd568f66774eb61a043e7d7d0">CircularBufferSpiFlashRK::getSector</a></div><div class="ttdeci">Sector * getSector(uint16_t sectorNum)</div><div class="ttdoc">Get the Sector object for a sector, allocating and reading it if not in the cache.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:187</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a578b17b5feeb99c1ba0378e8726089b0"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a578b17b5feeb99c1ba0378e8726089b0">CircularBufferSpiFlashRK::spiFlash</a></div><div class="ttdeci">SpiFlash * spiFlash</div><div class="ttdoc">The class to access the SPI flash chip.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:607</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a58b4dbe91cbf34d52edf4bd764bbe60e"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a58b4dbe91cbf34d52edf4bd764bbe60e">CircularBufferSpiFlashRK::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdoc">Locks the mutex that protects shared resources.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:587</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a5912ad454fc0c21838f6ff3cfc7b11eb"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a5912ad454fc0c21838f6ff3cfc7b11eb">CircularBufferSpiFlashRK::SECTOR_FLAG_CORRUPTED_MASK</a></div><div class="ttdeci">static const unsigned int SECTOR_FLAG_CORRUPTED_MASK</div><div class="ttdoc">Bit that is cleared when a sector has invalid record structures.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:560</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a5ab15276d9b4c507fea822cdada1e509"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a5ab15276d9b4c507fea822cdada1e509">CircularBufferSpiFlashRK::readData</a></div><div class="ttdeci">bool readData(ReadInfo &amp;readInfo)</div><div class="ttdoc">Read the next unread data from the circular buffer.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:534</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a60c23ebb59d7200219b31594ebcf7bbc"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a60c23ebb59d7200219b31594ebcf7bbc">CircularBufferSpiFlashRK::format</a></div><div class="ttdeci">bool format()</div><div class="ttdoc">Formats the file system.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:133</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a61bc4080818916c9912b94740a2c69ce"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a61bc4080818916c9912b94740a2c69ce">CircularBufferSpiFlashRK::getUsageStats</a></div><div class="ttdeci">bool getUsageStats(UsageStats &amp;usageStats)</div><div class="ttdoc">Get the usage statistics.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:723</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a6ac4189de4e4b04d63815188a139cc5e"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a6ac4189de4e4b04d63815188a139cc5e">CircularBufferSpiFlashRK::SECTOR_FLAG_FINALIZED_MASK</a></div><div class="ttdeci">static const unsigned int SECTOR_FLAG_FINALIZED_MASK</div><div class="ttdoc">Bit that is cleared when a sector has been fully written to.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:559</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a6dfb6fc1c16ecb3747ec582c63eff9d3"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a6dfb6fc1c16ecb3747ec582c63eff9d3">CircularBufferSpiFlashRK::sectorMeta</a></div><div class="ttdeci">SectorCommon * sectorMeta</div><div class="ttdoc">Array of SectorCommon structures, one for each sector.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:612</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a70d27b412e85cc35b367fe2cade1b299"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a70d27b412e85cc35b367fe2cade1b299">CircularBufferSpiFlashRK::SECTOR_MAGIC_ERASED</a></div><div class="ttdeci">static const uint32_t SECTOR_MAGIC_ERASED</div><div class="ttdoc">Magic bytes value if the sector is erased and not formatted.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:557</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a71129a8c1f99f04194c48cac564a02f2"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a71129a8c1f99f04194c48cac564a02f2">CircularBufferSpiFlashRK::isValid</a></div><div class="ttdeci">bool isValid</div><div class="ttdoc">true once load() or format() has been called and is successful</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:615</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a82930c5b6f874f67ce420c988e9f52be"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a82930c5b6f874f67ce420c988e9f52be">CircularBufferSpiFlashRK::RECORD_FLAG_READ_MASK</a></div><div class="ttdeci">static const unsigned int RECORD_FLAG_READ_MASK</div><div class="ttdoc">Bit that is cleared when a record has been read.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:563</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a86006434a834c159e32a23d15a1ee39b"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a86006434a834c159e32a23d15a1ee39b">CircularBufferSpiFlashRK::readDataFromSector</a></div><div class="ttdeci">bool readDataFromSector(Sector *sector, size_t index, DataBuffer &amp;data, RecordCommon &amp;meta)</div><div class="ttdoc">Used internally to read a record from a sector. Use readData() instead!</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:385</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a8904f39e18d5a6782ddae2beb4173607"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a8904f39e18d5a6782ddae2beb4173607">CircularBufferSpiFlashRK::mutex</a></div><div class="ttdeci">os_mutex_recursive_t mutex</div><div class="ttdoc">Mutex to protect shared resources.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:628</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a89b3df3d2620ff85ea450da20f011f31"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a89b3df3d2620ff85ea450da20f011f31">CircularBufferSpiFlashRK::tryLock</a></div><div class="ttdeci">bool tryLock()</div><div class="ttdoc">Attempts to lock the mutex that protects shared resources.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:594</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a8adb742373527d0dc3c1255357a863e5"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a8adb742373527d0dc3c1255357a863e5">CircularBufferSpiFlashRK::load</a></div><div class="ttdeci">bool load()</div><div class="ttdoc">Load the metadata for the file system.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:52</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_a986083e8e9d153e217bb3cf882bd50d6"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#a986083e8e9d153e217bb3cf882bd50d6">CircularBufferSpiFlashRK::writeSequence</a></div><div class="ttdeci">uint32_t writeSequence</div><div class="ttdoc">Sequence number to write to.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:619</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_aa3a5dd4d8b3788e4303b352526654199"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#aa3a5dd4d8b3788e4303b352526654199">CircularBufferSpiFlashRK::appendDataToSector</a></div><div class="ttdeci">bool appendDataToSector(Sector *sector, const DataBuffer &amp;data, uint16_t flags)</div><div class="ttdoc">Used internally to append data to an existing sector. Use writeData() instead!</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:322</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_aa6572d4ee56457e6afd87f76bd25a832"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#aa6572d4ee56457e6afd87f76bd25a832">CircularBufferSpiFlashRK::SECTOR_FLAG_STARTED_MASK</a></div><div class="ttdeci">static const unsigned int SECTOR_FLAG_STARTED_MASK</div><div class="ttdoc">Bit that is cleared when a sector is first written to after formatting.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:558</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_aa6acce5c09acca8c9aa0e292f46059e0"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#aa6acce5c09acca8c9aa0e292f46059e0">CircularBufferSpiFlashRK::writeSectorHeader</a></div><div class="ttdeci">bool writeSectorHeader(uint16_t sectorNum, bool erase, uint32_t sequence)</div><div class="ttdoc">Used internally to write a sector header. Use writeData() instead!</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:283</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_aacdb38297a29247c2d93421cfdac69f0"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#aacdb38297a29247c2d93421cfdac69f0">CircularBufferSpiFlashRK::~CircularBufferSpiFlashRK</a></div><div class="ttdeci">virtual ~CircularBufferSpiFlashRK()</div><div class="ttdoc">Destroy the object.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:38</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_ab0cb6344b834a5f9fbf3fa2b7ba1600c"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#ab0cb6344b834a5f9fbf3fa2b7ba1600c">CircularBufferSpiFlashRK::lastSequence</a></div><div class="ttdeci">uint32_t lastSequence</div><div class="ttdoc">Last sequence number used.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:620</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_abf699ab2202f8c1b93f3a806e6f6bd2a"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#abf699ab2202f8c1b93f3a806e6f6bd2a">CircularBufferSpiFlashRK::addrEnd</a></div><div class="ttdeci">size_t addrEnd</div><div class="ttdoc">Address in SPI flash where circular buffer ends, must be sector aligned.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:609</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_ac6f99a80a69cdb6e1fb59891fe962dd7"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#ac6f99a80a69cdb6e1fb59891fe962dd7">CircularBufferSpiFlashRK::SECTOR_CACHE_SIZE</a></div><div class="ttdeci">static const size_t SECTOR_CACHE_SIZE</div><div class="ttdoc">Number of cached Sector structures used by getSector.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:576</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_ad17c2ee2a4b2cbf4d2bfa9ab024bddaa"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#ad17c2ee2a4b2cbf4d2bfa9ab024bddaa">CircularBufferSpiFlashRK::SECTOR_MAGIC</a></div><div class="ttdeci">static const uint32_t SECTOR_MAGIC</div><div class="ttdoc">Magic bytes stored at beginning of SectorHeader structure.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:556</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_aed362f2b86c41054437890134242d339"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#aed362f2b86c41054437890134242d339">CircularBufferSpiFlashRK::clearCache</a></div><div class="ttdeci">void clearCache()</div><div class="ttdoc">Remove entries from the sector cache.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:788</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_af80549fd6874d1b54b702625a6238de1"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#af80549fd6874d1b54b702625a6238de1">CircularBufferSpiFlashRK::firstSequence</a></div><div class="ttdeci">uint32_t firstSequence</div><div class="ttdoc">Sequence number of read from.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:618</div></div>
<div class="ttc" id="aclass_circular_buffer_spi_flash_r_k_html_af8247a646cef67d55a0b61b5dd6533ae"><div class="ttname"><a href="class_circular_buffer_spi_flash_r_k.html#af8247a646cef67d55a0b61b5dd6533ae">CircularBufferSpiFlashRK::CircularBufferSpiFlashRK</a></div><div class="ttdeci">CircularBufferSpiFlashRK(SpiFlash *spiFlash, size_t addrStart, size_t addrEnd)</div><div class="ttdoc">Construct a new circular buffer object. This is typically done as a global variable.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.cpp:11</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_record_common_html"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html">CircularBufferSpiFlashRK::RecordCommon</a></div><div class="ttdoc">Data stored in flash for each record in the sector.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:232</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_record_common_html_a377f92bae6b4ee097c9ea69d7f67fff1"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html#a377f92bae6b4ee097c9ea69d7f67fff1">CircularBufferSpiFlashRK::RecordCommon::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdoc">Flag bits.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:234</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_record_common_html_a5939069d28e86afbab0bfe08275f594d"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_record_common.html#a5939069d28e86afbab0bfe08275f594d">CircularBufferSpiFlashRK::RecordCommon::size</a></div><div class="ttdeci">unsigned int size</div><div class="ttdoc">Number of bytes (0 - 4094, though less with overhead)</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:233</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_sector_common_html"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html">CircularBufferSpiFlashRK::SectorCommon</a></div><div class="ttdoc">Data stored after the magic bytes in flash.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:243</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_sector_common_html_a1e4bf0be2ea09ab7992563e72a5e7cf6"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#a1e4bf0be2ea09ab7992563e72a5e7cf6">CircularBufferSpiFlashRK::SectorCommon::reserved</a></div><div class="ttdeci">unsigned int reserved</div><div class="ttdoc">Reserved for future use.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:246</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_sector_common_html_a2f54cc367f63c395fb4e0ce2178482be"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#a2f54cc367f63c395fb4e0ce2178482be">CircularBufferSpiFlashRK::SectorCommon::dataSize</a></div><div class="ttdeci">unsigned int dataSize</div><div class="ttdoc">Number of bytes of data in records, set during finalize.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:248</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_sector_common_html_a35fb3ff156326fdbb955c942dbf2c096"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#a35fb3ff156326fdbb955c942dbf2c096">CircularBufferSpiFlashRK::SectorCommon::sequence</a></div><div class="ttdeci">uint32_t sequence</div><div class="ttdoc">Monotonically increasing sequence number for sector used.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:244</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_sector_common_html_aebb16fb5ef69b700df8294e428ef0b8d"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#aebb16fb5ef69b700df8294e428ef0b8d">CircularBufferSpiFlashRK::SectorCommon::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdoc">Various flag bits.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:245</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_sector_common_html_af32ee7d735fff9e1531aa11612825f32"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_sector_common.html#af32ee7d735fff9e1531aa11612825f32">CircularBufferSpiFlashRK::SectorCommon::recordCount</a></div><div class="ttdeci">unsigned int recordCount</div><div class="ttdoc">Number of records, set during finalize.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:247</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_sector_header_html"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_sector_header.html">CircularBufferSpiFlashRK::SectorHeader</a></div><div class="ttdoc">Structure store at the beginning of each sector.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:258</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_sector_header_html_aaaf6a1958bafafacdf9cb317941a4b74"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_sector_header.html#aaaf6a1958bafafacdf9cb317941a4b74">CircularBufferSpiFlashRK::SectorHeader::c</a></div><div class="ttdeci">SectorCommon c</div><div class="ttdoc">SectorCommon structure (8 bytes)</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:260</div></div>
<div class="ttc" id="astruct_circular_buffer_spi_flash_r_k_1_1_sector_header_html_adf38302a4c99afdffdd9d046059d8edc"><div class="ttname"><a href="struct_circular_buffer_spi_flash_r_k_1_1_sector_header.html#adf38302a4c99afdffdd9d046059d8edc">CircularBufferSpiFlashRK::SectorHeader::sectorMagic</a></div><div class="ttdeci">uint32_t sectorMagic</div><div class="ttdoc">Magic bytes SECTOR_MAGIC = 0x0ceb6443.</div><div class="ttdef"><b>Definition</b> CircularBufferSpiFlashRK.h:259</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
